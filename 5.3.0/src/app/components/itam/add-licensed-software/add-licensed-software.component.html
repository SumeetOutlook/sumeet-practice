<h1><strong style=" color:#008bd0 !important;">New Licensed Agreement</strong> </h1>
<mat-divider></mat-divider>
<h3><strong>License Agreement Details</strong></h3>

<form [formGroup]="stp1Form" class="mt-16">
    <div fxLayout="row wrap" fxLayout.lt-sm="column" class="formscroll mt-12" style="margin-bottom: -8px !important;">
      <!-- <div fxFlex="15" class="pr-1 full">
            <mat-form-field class="full-width" appearance="outline">
              <mat-label class="label" style="font-size: 15px !important;">{{header.InventoryNumber}} <span *ngIf="UploadNameBy != 'GRNNo'" style="color: red;">*</span> </mat-label>
              <input matInput name="InventoryNo" maxlength="30" [formControl]="AssetInfo.controls['InventoryNo']"
                class="bg-transparente" autocomplete="off">
            </mat-form-field>
          </div> -->

          <div fxFlex="25" class="pr-1">
            <mat-form-field class="full-width" appearance="outline">
              <mat-label class="label">Manufacturer</mat-label>
              <input matInput maxlength="45"  [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
                <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
                  <span *ngIf="s1.AsstNo.errors?.required">Software Name is required</span>
                </mat-error>
            </mat-form-field>
          </div>

      <div fxFlex="25" class="pr-1" >
        <mat-form-field class="full-width" appearance="outline">
            <mat-label class="label">Active From</mat-label>
            <input matInput [matDatepicker]="picker1" (click)="picker1.open();"
            [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1 ></mat-datepicker>
        </mat-form-field>
      </div>

<!-- If Capitalized Software Selected -->
      <div fxFlex="25" class="pr-1">
        <mat-form-field class="full-width" appearance="outline">
          <mat-label class="label">Agreement Number</mat-label>
          <input matInput maxlength="45"  [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
            <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
              <span *ngIf="s1.AsstNo.errors?.required">Version is required</span>
            </mat-error>
        </mat-form-field>
      </div>

      <div fxFlex="25" class="pr-1">
        <mat-form-field class="full-width" appearance="outline">
          <mat-label class="label">Expiry Date</mat-label>
          <input matInput [matDatepicker]="picker2" (click)="picker2.open();"
          [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker #picker2 ></mat-datepicker>
        </mat-form-field>
      </div>

      <div fxFlex="25" class="pr-1" >
        <mat-form-field class="full-width" appearance="outline">
          <mat-label class="label">Authorization Number</mat-label>
          <input matInput maxlength="45"  [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
            <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
              <span *ngIf="s1.AsstNo.errors?.required">Manufacturer is required</span>
            </mat-error>
        </mat-form-field>
      </div>

      <div fxFlex="25" class="pr-1">
        <mat-form-field class="full-width" appearance="outline">
          <mat-label class="label">Vendor</mat-label>
          <input matInput maxlength="45"  [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
            <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
              <span *ngIf="s1.AsstNo.errors?.required">Software Category is required</span>
            </mat-error>
        </mat-form-field>
      </div>

      <div fxFlex="25" class="pr-1" >
        <mat-form-field class="full-width" appearance="outline">
          <mat-label class="label">Description</mat-label>
          <textarea matInput   [formControl]="stp1Form.controls['AsstNo']" autocomplete="off"></textarea>
            <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
              <span *ngIf="s1.AsstNo.errors?.required">Description is required</span>
            </mat-error>
        </mat-form-field>
      </div>

      <div fxFlex="25" class="pr-1" >
        <mat-form-field class="full-width" appearance="outline">
          <mat-label class="label">Terms</mat-label>
          <textarea matInput   [formControl]="stp1Form.controls['AsstNo']" autocomplete="off"></textarea>
            <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
              <span *ngIf="s1.AsstNo.errors?.required">Description is required</span>
            </mat-error>
        </mat-form-field>
      </div>
    </div>

      <mat-divider></mat-divider>
<h3><strong>Attachments</strong></h3>
<div fxLayout="row wrap" fxLayout.lt-sm="column" class="formscroll mt-12" style="margin-bottom: -8px !important;">
      <div fxFlex="25" class="pr-1" *ngFor="let photo of photos">
        <input type="file" placeholder="Upload file" class="uploadSelectClass" />
      </div>
      <span   matTooltip="Upload another image" [matTooltipDisabled]="false" >
        <button mat-raised-button class="minibtn" (click)="addAnotherPhoto()" style="margin-left: 8px !important">
          <mat-icon style="color: white;">add</mat-icon>
        </button></span>
      </div>

      <mat-divider style="padding: 25px;"></mat-divider>
      <h3><strong>Purchase & Invoice Details</strong></h3>
      
 <div fxLayout="row wrap" fxLayout.lt-sm="column" class="formscroll mt-12" style="margin-bottom: -8px !important;">
  <div fxFlex="25" class="pr-1">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label class="label">PO#</mat-label>
      <input matInput maxlength="45"  [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
        <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
          <span *ngIf="s1.AsstNo.errors?.required">Software Name is required</span>
        </mat-error>
    </mat-form-field>
  </div>

  <div fxFlex="25" class="pr-1" >
    <mat-form-field class="full-width" appearance="outline">
      <mat-label class="label">Invoice Number</mat-label>
      <input matInput maxlength="45"  [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
        <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
          <span *ngIf="s1.AsstNo.errors?.required">Software Name is required</span>
        </mat-error>
    </mat-form-field>
  </div>

  <div fxFlex="25" class="pr-1" >
    <mat-form-field class="full-width" appearance="outline">
      <mat-label class="label">PO Name</mat-label>
      <input matInput maxlength="45"  [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
        <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
          <span *ngIf="s1.AsstNo.errors?.required">Software Name is required</span>
        </mat-error>
    </mat-form-field>
  </div>

  <div fxFlex="25" class="pr-1" >
    <mat-form-field class="full-width" appearance="outline">
        <mat-label class="label">Invoice Date</mat-label>
        <input matInput [matDatepicker]="picker3" (click)="picker3.open();"
        [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
        <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
        <mat-datepicker #picker3 ></mat-datepicker>
    </mat-form-field>
  </div>

  <div fxFlex="25" class="pr-1">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label class="label">Purchase Date</mat-label>
      <input matInput [matDatepicker]="picker4" (click)="picker4.open();"
      [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
      <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
      <mat-datepicker #picker4 ></mat-datepicker>
    </mat-form-field>
  </div>


  <div fxFlex="25" class="pr-1">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label class="label">Total Cost</mat-label>
      <input matInput maxlength="45"  [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
        <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
          <span *ngIf="s1.AsstNo.errors?.required">Software Name is required</span>
        </mat-error>
    </mat-form-field>
  </div>

  <div fxFlex="25" class="pr-1" >
    <mat-form-field class="full-width" appearance="outline">
      <mat-label class="label">Description</mat-label>
      <input matInput maxlength="45"  [formControl]="stp1Form.controls['AsstNo']" autocomplete="off">
        <mat-error *ngIf="submitted || s1.AsstNo.errors || s1.AsstNo.dirty || s1.AsstNo.touched">
          <span *ngIf="s1.AsstNo.errors?.required">Software Name is required</span>
        </mat-error>
    </mat-form-field>
  </div>
</div>

<mat-divider></mat-divider>
<h3><strong>Purchased Software Licenses</strong></h3>

<div style="margin-top: 20px;">
  <div style="margin-bottom: 20px">
    <button (click)="moveToSoftwareLicensePage()" type="button">Add new License and associate</button>
    <button type="button">Associate Existing Licenses</button>
  </div>

  <div class=" example-container mat-elevation-z8">
    <table mat-table #table [dataSource]="datasource" matSort>
      <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns; index as i ">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span
            *ngIf="column == 'Order Type' ">
            {{column}}
          </span>
        <span
        *ngIf="column == 'Actions' ">
        {{column}}
      </span>
      <span
      *ngIf="column == 'Photo' "> 
        Photo 
    </span>
          <span
            *ngIf="column!='Actions' && column != 'Photo' && column != 'AssetId' && column != 'Icon' && column != 'ADL2' && column != 'ADL3' && column != 'Suplier' && column != 'GRNNo' && column != 'Barcode' && column != 'SerialNo' && column != 'ITSerialNo' && column != 'PONumber'&& column != 'equipmentNo' && column != 'CPPNumber' && column != 'Select' && column != 'Order Type' && column != 'Issue Type'&& column != 'Mapping' ">
            {{column}}
          </span>
        </th>
        <td mat-cell *matCellDef="let element; let i = index;">
            <span
            *ngIf="column == 'Order Type' ">
            {{element[column]}}
          </span>
          <!-- <span
          *ngIf="column == 'Mapping' ">
          {{element[column]}}
        </span> -->
        <span
        *ngIf="column == 'Photo'"> 
          <a style="color:#008bd0 !important;cursor: pointer;" target="_blank" href="https://images.unsplash.com/photo-1588127333419-b9d7de223dcf?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1169&q=80">View Photo</a> 
      </span>
      <span style="cursor: pointer;"
      *ngIf="column == 'Actions' ">
      <!-- <mat-icon style="padding-right: 5px;" (click)="openInfoDialog('view',element,i)">info</mat-icon>  -->
      <mat-icon style="color: #0a95ff;padding-right: 5px;" (click)="openInfoDialog('edit',element,i)">edit</mat-icon> 
      <mat-icon style="color: #ff3d00;" (click)="openInfoDialog('delete',element,i)">delete</mat-icon>
    </span>
          <span
            *ngIf="column!='Actions' && column != 'Photo'&&column != 'AssetId' && column != 'Icon' && column != 'Select' && column != 'AcquisitionDate' && column != 'WDVDate' && column != 'AcquisitionCost' && column != 'WDV' && column != 'Barcode' && column != 'SubAssetId'&& column != 'Order Type' && column != 'Issue Type' && column != 'Mapping'">
            {{element[column]}}
          </span>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <div style="text-align: center;" *ngIf="datasource?.data?.length === 0">No software licenses found in this view</div>
  </div>
</div>

<mat-divider></mat-divider>
<h3 style="margin-top: 20px;"><strong>Agreement Expiry Notification</strong></h3>
<mat-divider></mat-divider>

<div fxLayout="row wrap" fxLayout.lt-sm="column" class="formscroll mt-12" style="margin-bottom: -8px !important;">
  <div  fxFlex="20" class="pr-1">

  </div>
<div  fxFlex="25" class="pr-1">
  <mat-card>
    <!-- <mat-list>
      <mat-list-item *ngFor="let lU of lUsers"> {{lU}} </mat-list-item>
     </mat-list> -->
     <mat-card-title style="background-color: grey;
     color: white;
     width: 117%;
     margin-left: -15px;
     margin-top: -18px;">User List</mat-card-title>
     <mat-radio-group [(ngModel)]="lUser" [ngModelOptions]="{standalone: true}" aria-label="Select an option">
      <div *ngFor="let lU of lUsers">
        <mat-radio-button  [value]="lU">{{lU}}</mat-radio-button>
      </div>
    </mat-radio-group>
  </mat-card>
</div>
<div fxFlex="10" class="pr-1">
  <span   matTooltip="Upload another image" [matTooltipDisabled]="false" >
    <button (click)="moveUserLeft()" mat-raised-button class="minibtn"  style="margin-left: 8px !important">
      <mat-icon style="color: white;">arrow_left</mat-icon>
    </button></span>
    <span   matTooltip="Upload another image" [matTooltipDisabled]="false" >
      <button mat-raised-button (click)="moveUserRight()" class="minibtn"  style="margin-left: 8px !important">
        <mat-icon style="color: white;">arrow_right</mat-icon>
      </button></span>
</div>
<div  fxFlex="25" class="pr-1">
  <mat-card>   
     <!-- <mat-list>
    <mat-list-item *ngFor="let rU of rUsers"> {{rU}} </mat-list-item>
   </mat-list> -->
   <mat-card-title style="background-color: grey;
   color: white;
   width: 117%;
   margin-left: -15px;
   margin-top: -18px;">Notify User List</mat-card-title>
   <mat-radio-group [(ngModel)]="rUser" [ngModelOptions]="{standalone: true}" aria-label="Select an option">
    <div *ngFor="let rU of rUsers">
      <mat-radio-button  [value]="rU">{{rU}}</mat-radio-button>
    </div>
  </mat-radio-group>
  </mat-card>
</div>
</div>
      </form>